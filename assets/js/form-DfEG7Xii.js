import{l as w}from"./element-plus-C-DFkfq5.js";import{d as x,i as u,r as d,l as F,p as W,e as $,b as f,o as h,c as v,a0 as j,W as M,Q as b,F as B,ac as E,S as L,k as N,Z as O}from"./@vue-pvvZVrFb.js";import"./lodash-es-l8Yk8yFo.js";import"./@vueuse-T0N5pcum.js";import"./nprogress-D_ytO6nf.js";import"./@imengyu-CJXSuKKD.js";import"./vue-CFNvRKsS.js";import"./@element-plus-B1SGd3PH.js";import"./@sxzz-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-BU0tXZvT.js";import"./async-validator-CRbnkQr6.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-DiM7Jq06.js";const V={key:0,class:"form-main",style:{height:"100%"}},ee=x({__name:"form",props:{componentSchema:{type:Object,require:!0,default:()=>({})}},setup(g,{expose:y}){var p,c;const a=g,S=u("pageManager",{}),t=d(null),m=u("forms",{}),_=d(!0),n=F({});S.addFormData(n,(c=(p=a.componentSchema)==null?void 0:p.componentProps)==null?void 0:c.name),W("formData",n);function s(){return n}function l(e){Object.assign(n,e)}function C(){var e;return(e=t.value)==null?void 0:e.validate()}$(async()=>{var e,r,o,i;if(((e=a.componentSchema)==null?void 0:e.type)==="form"&&m.value&&t.value){const k=((o=(r=a.componentSchema)==null?void 0:r.componentProps)==null?void 0:o.name)??((i=a.componentSchema)==null?void 0:i.name)??"default";return m.value[k]=t.value,t.value.getData=s,t.value.setData=l,!1}});const D=f(()=>{const e=a.componentSchema.componentProps;let r=e.labelCol,o=e.wrapperCol;return e.labelLayout==="fixed"&&(r={style:`width:${typeof e.labelWidth=="number"?`${e.labelWidth}px`:e.labelWidth}`},o={style:"width:auto;flex:1"}),{...e,labelCol:r,wrapperCol:o}}),P=f(()=>a.componentSchema.children??[]);return y({form:t,getData:s,setData:l,validate:C}),(e,r)=>_.value?(h(),v("div",V,[j(N(w),L({ref_key:"form",ref:t,model:n},D.value,{style:{height:"100%"}}),{default:M(()=>[b(e.$slots,"edit-node",{},()=>[(h(!0),v(B,null,E(P.value,o=>b(e.$slots,"node",{componentSchema:o})),256))])]),_:3},16,["model"])])):O("",!0)}});export{ee as default};
