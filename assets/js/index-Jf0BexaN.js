import{_ as x}from"./index.vue_vue_type_script_setup_true_lang-BEqSM3EJ.js";import{a as k}from"./element-plus-BpVoL6Hl.js";import{d as C,aj as $,o as r,U as N,V,c as f,a as l,$ as i,Y as E,Z as O,bp as P,bN as Q,r as z,F as G,ab as J,W as M,a0 as B,Q as y,k as d,q as R,S as W,P as j,_ as D,a7 as H,M as q}from"./@vue-LCQfV9EA.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./@iconify-C_QmsgvM.js";import"./lodash-es-l8Yk8yFo.js";import"./@vueuse-BnjkpT_4.js";import"./nprogress-I2SXJrfn.js";import"./@imengyu-hlz2FzY4.js";import"./vue-V89jKJcT.js";import"./@element-plus-CddI3ttR.js";import"./@sxzz-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-B1Q6uUGR.js";import"./async-validator-CRbnkQr6.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-DiM7Jq06.js";const K={class:"slot"},X={key:0,class:"el-upload__tip"},ee={style:{display:"inline-block"}},te=C({name:"FileUpload",__name:"index",props:{action:{},headers:{},data:{},name:{default:"file"},size:{default:2},max:{default:3},files:{default:()=>[]},notip:{type:Boolean,default:!1},ext:{default:()=>["zip","rar"]}},emits:["onSuccess"],setup(w,{emit:m}){const n=w,p=m,a=s=>{const h=s.name.split(".").at(-1)??"",b=n.ext.includes(h),v=s.size/1024/1024<n.size;return b||k.error(`上传文件只支持 ${n.ext.join(" / ")} 格式！`),v||k.error(`上传文件大小不能超过 ${n.size}MB！`),b&&v},t=()=>{k.warning("文件上传超过限制")},S=(s,c,h)=>{p("onSuccess",s,c,h)};return(s,c)=>{const h=x,b=$("ElAlert"),v=$("ElUpload");return r(),N(v,{headers:s.headers,action:s.action,data:s.data,name:s.name,"before-upload":a,"on-exceed":t,"on-success":S,"file-list":s.files,limit:s.max,drag:""},{tip:V(()=>[s.notip?E("",!0):(r(),f("div",X,[l("div",ee,[i(b,{title:`上传文件支持 ${s.ext.join(" / ")} 格式，单个文件大小不超过 ${s.size}MB，且文件数量不超过 ${s.max} 个`,type:"info","show-icon":"",closable:!1},null,8,["title"])])]))]),default:V(()=>[l("div",K,[i(h,{name:"ep:upload-filled",class:"el-icon--upload"}),c[0]||(c[0]=l("div",{class:"el-upload__text"},[O(" 将文件拖到此处，或"),l("em",null,"点击上传")],-1))])]),_:1},8,["headers","action","data","name","file-list","limit"])}}}),se=T(te,[["__scopeId","data-v-f79e317d"]]),oe={class:"upload-container"},ae={class:"mask"},le={class:"actions"},ie=["onClick"],ne=["onClick"],re=["onClick"],ce=["onClick"],pe={key:0,class:"el-upload__tip"},de={style:{display:"inline-block"}},ue=C({name:"ImagesUpload",__name:"index",props:P({action:{},headers:{},data:{},name:{default:"file"},size:{default:2},max:{default:3},width:{default:150},height:{default:150},placeholder:{default:""},notip:{type:Boolean,default:!1},ext:{default:()=>["jpg","png","gif","bmp"]}},{modelValue:{default:[]},modelModifiers:{}}),emits:P(["onSuccess"],["update:modelValue"]),setup(w,{emit:m}){const n=w,p=m,a=Q(w,"modelValue"),t=z({dialogImageIndex:0,imageViewerVisible:!1,progress:{preview:"",percent:0}});function S(e){t.value.dialogImageIndex=e,t.value.imageViewerVisible=!0}function s(){t.value.imageViewerVisible=!1}function c(e){a.value.splice(e,1)}function h(e,g){g==="left"&&e!==0&&(a.value[e]=a.value.splice(e-1,1,a.value[e])[0]),g==="right"&&e!==a.value.length-1&&(a.value[e]=a.value.splice(e+1,1,a.value[e])[0])}const b=e=>{const _=e.name.split(".").at(-1)??"",u=n.ext.includes(_),U=e.size/1024/1024<n.size;return u||k.error(`上传图片只支持 ${n.ext.join(" / ")} 格式！`),U||k.error(`上传图片大小不能超过 ${n.size}MB！`),u&&U&&(t.value.progress.preview=URL.createObjectURL(e)),u&&U},v=e=>{t.value.progress.percent=~~e.percent},o=e=>{t.value.progress.preview="",t.value.progress.percent=0,p("onSuccess",e)};return(e,g)=>{const _=$("ElImage"),u=x,U=$("ElProgress"),A=$("ElUpload"),F=$("ElAlert"),Y=$("ElImageViewer");return r(),f("div",oe,[(r(!0),f(G,null,J(a.value,(Z,I)=>(r(),f("div",{key:I,class:"images"},[I<e.max?(r(),N(_,{key:0,src:Z,style:y(`width:${e.width}px;height:${e.height}px;`),fit:"cover"},null,8,["src","style"])):E("",!0),l("div",ae,[l("div",le,[l("span",{title:"预览",onClick:L=>S(I)},[i(u,{name:"ep:zoom-in",class:"icon"})],8,ie),l("span",{title:"移除",onClick:L=>c(I)},[i(u,{name:"ep:delete",class:"icon"})],8,ne),M(l("span",{title:"左移",class:R({disabled:I===0}),onClick:L=>h(I,"left")},[i(u,{name:"ep:back",class:"icon"})],10,re),[[B,a.value.length>1]]),M(l("span",{title:"右移",class:R({disabled:I===a.value.length-1}),onClick:L=>h(I,"right")},[i(u,{name:"ep:right",class:"icon"})],10,ce),[[B,a.value.length>1]])])])]))),128)),M(i(A,{"show-file-list":!1,headers:e.headers,action:e.action,data:e.data,name:e.name,"before-upload":b,"on-progress":v,"on-success":o,drag:"",class:"images-upload"},{default:V(()=>[l("div",{class:"image-slot",style:y(`width:${e.width}px;height:${e.height}px;`)},[i(u,{name:"ep:plus",class:"icon"})],4),M(l("div",{class:"progress",style:y(`width:${e.width}px;height:${e.height}px;`)},[i(_,{src:d(t).progress.preview,style:y(`width:${e.width}px;height:${e.height}px;`),fit:"fill"},null,8,["src","style"]),i(U,{type:"circle",width:Math.min(e.width,e.height)*.8,percentage:d(t).progress.percent},null,8,["width","percentage"])],4),[[B,d(t).progress.percent]])]),_:1},8,["headers","action","data","name"]),[[B,a.value.length<e.max]]),e.notip?E("",!0):(r(),f("div",pe,[l("div",de,[i(F,{title:`上传图片支持 ${e.ext.join(" / ")} 格式，单张图片大小不超过 ${e.size}MB，建议图片尺寸为 ${e.width}*${e.height}，且图片数量不超过 ${e.max} 张`,type:"info","show-icon":"",closable:!1},null,8,["title"])])])),d(t).imageViewerVisible?(r(),N(Y,{key:1,"url-list":a.value,"initial-index":d(t).dialogImageIndex,teleported:"",onClose:s},null,8,["url-list","initial-index"])):E("",!0)])}}}),me=T(ue,[["__scopeId","data-v-f2b41c66"]]),he={key:0,class:"title-container border-b-1 border-b-[var(--g-bg)] border-b-solid px-5 py-4 transition-border-color-300"},ge={class:"main-container"},fe=C({name:"PageMain",__name:"index",props:{title:{default:""},collaspe:{type:Boolean,default:!1},height:{default:""},background:{default:""},padding:{default:"10px"}},setup(w){const m=w,n=!!W().title,p=z(m.collaspe);function a(){p.value=!1}return(t,S)=>{const s=x;return r(),f("div",{class:R(["page-main relative flex flex-1 flex-col rounded-8px transition-background-color-300",{"of-hidden":d(p)}]),style:y({height:d(p)?t.height:"",backgroundColor:t.background?t.background:"var(--g-container-bg)",padding:t.padding})},[n||t.title?(r(),f("div",he,[j(t.$slots,"title",{},()=>[O(D(t.title),1)])])):E("",!0),l("div",ge,[j(t.$slots,"default")]),d(p)?(r(),f("div",{key:1,class:"collaspe absolute bottom-0 w-full cursor-pointer from-transparent to-[var(--g-container-bg)] bg-gradient-to-b pb-2 pt-10 text-center",onClick:a},[i(s,{name:"ep:arrow-down",class:"text-xl op-30 transition-opacity hover:op-100"})])):E("",!0)],6)}}}),ve={class:"upload-container"},_e={key:1,class:"image"},$e={class:"mask"},we={class:"actions"},be={key:0,class:"el-upload__tip"},ye={style:{display:"inline-block"}},ke=C({name:"ImageUpload",__name:"index",props:P({action:{},headers:{},data:{},name:{default:"file"},size:{default:2},width:{default:150},height:{default:150},placeholder:{default:""},notip:{type:Boolean,default:!1},ext:{default:()=>["jpg","png","gif","bmp"]}},{modelValue:{default:""},modelModifiers:{}}),emits:P(["onSuccess"],["update:modelValue"]),setup(w,{emit:m}){const n=w,p=m,a=Q(w,"modelValue"),t=z({imageViewerVisible:!1,progress:{preview:"",percent:0}});function S(){t.value.imageViewerVisible=!0}function s(){t.value.imageViewerVisible=!1}function c(){a.value=""}const h=o=>{const g=o.name.split(".").at(-1)??"",_=n.ext.includes(g),u=o.size/1024/1024<n.size;return _||k.error(`上传图片只支持 ${n.ext.join(" / ")} 格式！`),u||k.error(`上传图片大小不能超过 ${n.size}MB！`),_&&u&&(t.value.progress.preview=URL.createObjectURL(o)),_&&u},b=o=>{t.value.progress.percent=~~o.percent},v=o=>{t.value.progress.preview="",t.value.progress.percent=0,p("onSuccess",o)};return(o,e)=>{const g=x,_=$("ElImage"),u=$("ElProgress"),U=$("ElUpload"),A=$("ElAlert"),F=$("ElImageViewer");return r(),f("div",ve,[i(U,{"show-file-list":!1,headers:o.headers,action:o.action,data:o.data,name:o.name,"before-upload":h,"on-progress":b,"on-success":v,drag:"",class:"image-upload"},{default:V(()=>[a.value===""?(r(),N(_,{key:0,src:a.value===""?o.placeholder:a.value,style:y(`width:${o.width}px;height:${o.height}px;`),fit:"fill"},{error:V(()=>[l("div",{class:"image-slot",style:y(`width:${o.width}px;height:${o.height}px;`)},[i(g,{name:"ep:plus",class:"icon"})],4)]),_:1},8,["src","style"])):(r(),f("div",_e,[i(_,{src:a.value,style:y(`width:${o.width}px;height:${o.height}px;`),fit:"fill"},null,8,["src","style"]),l("div",$e,[l("div",we,[l("span",{title:"预览",onClick:H(S,["stop"])},[i(g,{name:"ep:zoom-in",class:"icon"})]),l("span",{title:"移除",onClick:H(c,["stop"])},[i(g,{name:"ep:delete",class:"icon"})])])])])),M(l("div",{class:"progress",style:y(`width:${o.width}px;height:${o.height}px;`)},[i(_,{src:d(t).progress.preview,style:y(`width:${o.width}px;height:${o.height}px;`),fit:"fill"},null,8,["src","style"]),i(u,{type:"circle",width:Math.min(o.width,o.height)*.8,percentage:d(t).progress.percent},null,8,["width","percentage"])],4),[[B,a.value===""&&d(t).progress.percent]])]),_:1},8,["headers","action","data","name"]),o.notip?E("",!0):(r(),f("div",be,[l("div",ye,[i(A,{title:`上传图片支持 ${o.ext.join(" / ")} 格式，且图片大小不超过 ${o.size}MB，建议图片尺寸为 ${o.width}*${o.height}`,type:"info","show-icon":"",closable:!1},null,8,["title"])])])),d(t).imageViewerVisible?(r(),N(F,{key:1,"url-list":[a.value],teleported:"",onClose:s},null,8,["url-list"])):E("",!0)])}}}),Ve=T(ke,[["__scopeId","data-v-7a9b9ca1"]]),Ee={class:"page-header mb-2 flex flex-wrap items-center justify-between gap-5 bg-[var(--g-container-bg)] px-5 py-4 transition-background-color-300"},Se={class:"main flex-[1_1_70%]"},Ie={class:"text-2xl"},Ue={class:"mt-2 text-sm text-stone-5 empty:hidden"},ze={key:0,class:"ml-a flex-none"},Ce=C({name:"PageHeader",__name:"index",props:{title:{},content:{}},setup(w){const m=W();return(n,p)=>(r(),f("div",Ee,[l("div",Se,[l("div",Ie,[j(n.$slots,"title",{},()=>[O(D(n.title),1)])]),l("div",Ue,[j(n.$slots,"content",{},()=>[O(D(n.content),1)])])]),d(m).default?(r(),f("div",ze,[j(n.$slots,"default")])):E("",!0)]))}}),Me={class:"p-10px"},Be={class:"py-2"},je={class:"py-2"},Ne={class:"py-2"},Xe=C({name:"FileUpload",__name:"index",setup(w){const m=z(""),n=s=>{s.code===200?m.value=s.data.path:k.warning(s.message)},p=z(["https://picsum.photos/400","https://picsum.photos/600","https://picsum.photos/500"]),a=z([{name:"xxxx文件.zip",url:"http://images.lookbi.com/uploads/apply/96/d8521fc691e472eec91a170201866e7d.zip"}]);function t(s){s.code===200?p.value.push(s.data.path):k.warning(s.message)}function S(s,c,h){s.code===200?a.value.push({name:c.name,url:s.code===200?s.data.path:""}):(h.pop(),k.warning(s.error))}return(s,c)=>{const h=Ce,b=Ve,v=fe,o=me,e=se;return r(),f("div",Me,[i(h,{title:"上传"},{content:V(()=>c[2]||(c[2]=[l("p",null,"ImageUpload / ImagesUpload / FileUpload",-1),l("p",{style:{"margin-bottom":"0"}}," 进行了上传大小的限制 ",-1)])),_:1}),i(v,{title:"单图上传"},{default:V(()=>[l("div",Be,[i(b,{modelValue:d(m),"onUpdate:modelValue":c[0]||(c[0]=g=>q(m)?m.value=g:null),action:"https://mock.apipost.net/mock/33b58cb934de000/?apipost_id=3b58d9a4fe6001",name:"image",width:250,height:150,onOnSuccess:n},null,8,["modelValue"])])]),_:1}),i(v,{title:"多图上传（默认最多3张）"},{default:V(()=>[l("div",je,[i(o,{modelValue:d(p),"onUpdate:modelValue":c[1]||(c[1]=g=>q(p)?p.value=g:null),action:"https://mock.apipost.net/mock/33b58cb934de000/?apipost_id=3b58d9a4fe6001",name:"image",onOnSuccess:t},null,8,["modelValue"])])]),_:1}),i(v,{title:"文件上传（默认最多3个）"},{default:V(()=>[l("div",Ne,[i(e,{files:d(a),action:"https://mock.apipost.net/mock/33b58cb934de000/?apipost_id=3b58d9a4fe6001",onOnSuccess:S},null,8,["files"])])]),_:1})])}}});export{Xe as default};
