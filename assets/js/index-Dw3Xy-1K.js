import{l as te,e as oe,a3 as re,d as X,r as p,o as Z,c as A,a as s,k as o,Q as Y,W as I,a0 as q,$ as t,V as r,aj as C,_ as le,ac as z,Z as y,a7 as N,Y as ae}from"./@vue-LCQfV9EA.js";import{_ as se}from"./index.vue_vue_type_script_setup_true_lang-BEqSM3EJ.js";import{u as ne,a as ie,g as D,s as de,r as ue,b as pe}from"./index-CKFEPiw8.js";import"./crypto-js-D_SVXpv8.js";import{u as me,b as ce}from"./vue-router-B2MUOgAJ.js";import{d as ge,a as K}from"./element-plus-BpVoL6Hl.js";import{_ as fe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./@iconify-C_QmsgvM.js";import"./floating-vue-YUXz7DHw.js";import"./@floating-ui-DiM7Jq06.js";import"./overlayscrollbars-DIcyBJd7.js";import"./vue-m-message-VvYgRV8r.js";import"./lodash-es-l8Yk8yFo.js";import"./pinia-DobjMTBt.js";import"./vue-demi-Dq6ymT-8.js";import"./colord-CrBFWQzZ.js";import"./@vueuse-BnjkpT_4.js";import"./nprogress-I2SXJrfn.js";import"./@imengyu-hlz2FzY4.js";import"./vue-V89jKJcT.js";import"./vite-plugin-mock-wX3zT8mi.js";import"./path-browserify-BrtdBuns.js";import"./axios-CRnBnh7r.js";import"./mockjs-K4fa3Lrb.js";import"./@element-plus-CddI3ttR.js";import"./@sxzz-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-B1Q6uUGR.js";import"./async-validator-CRbnkQr6.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";function we(E){const n=te({pool:"ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",width:130,height:46,imgCode:""}),i=(l,f)=>Number.parseInt(Math.random()*(f-l+1)+l),x=(l,f)=>{const d=i(l,f),m=i(l,f),w=i(l,f);return`rgb(${d},${m},${w})`},_=()=>{const l=E.value.getContext("2d");l.fillStyle="#ffffff",l.fillRect(0,0,n.width,n.height);let f="";for(let d=0;d<4;d++){const m=n.pool[i(0,n.pool.length-1)],w=i(18,40),S=i(-30,30);l.font=`${w}px Simhei`,l.textBaseline="middle",l.textAlign="center",l.fillStyle=x(80,150),l.save(),l.translate(30*d+15,15),l.rotate(S*Math.PI/180),l.fillText(m,5,10),l.restore(),f+=m}for(let d=0;d<5;d++)l.beginPath(),l.moveTo(i(0,n.width),i(0,n.height)),l.lineTo(i(0,n.width),i(0,n.height)),l.strokeStyle=x(180,230),l.closePath(),l.stroke();for(let d=0;d<40;d++)l.beginPath(),l.arc(i(0,n.width),i(0,n.height),1,0,2*Math.PI),l.closePath(),l.fillStyle=x(150,200),l.fill();return f};oe(()=>{_(),n.imgCode=_()});const V=()=>{_(),n.imgCode=_()};return{...re(n),handleDraw:V,verify:E}}const he=["width","height"],ve=X({name:"ImgVerify",__name:"index",setup(E,{expose:n}){const i=p(null),{width:x,height:_,handleDraw:V,imgCode:l}=we(i);return n({imgCode:l}),(f,d)=>(Z(),A("div",{style:Y({width:"131px",height:`${o(_)}px`,cursor:"pointer"})},[s("canvas",{ref_key:"verify",ref:i,width:o(x),height:o(_),onClick:d[0]||(d[0]=(...m)=>o(V)&&o(V)(...m))},null,8,he)],4))}}),_e={class:"login-container"},ye=["src"],xe={id:"login-box"},be={class:"title-container"},Ve=["src"],ke={class:"title"},Ce={class:"verify-img"},Re={class:"flex-bar"};const Ee={class:"sub-link"},Se={class:"sub-link"},Ue=X({__name:"index",setup(E){var M;const n=me(),i=ce(),x=ne(),_=ie(),V=new URL(""+new URL("../png/login-bg-BXj9mcoZ.png",import.meta.url).href,import.meta.url).href,l=new URL(""+new URL("../png/login-banner-BXBHY6Bw.png",import.meta.url).href,import.meta.url).href,f=new URL(""+new URL("../png/logo-BOfeghZX.png",import.meta.url).href,import.meta.url).href,d="Maiweite-Admin 管理系统",m=p("login"),w=p(!1),S=p(((M=n.query.redirect)==null?void 0:M.toString())??x.settings.home.fullPath),U=p(),g=p({account:D("login_account")||"admin",password:"123456",verifyCode:"",remember:!!D("login_account")}),T=p(null);function j(k,e,u){var c;e?e!==((c=T.value)==null?void 0:c.imgCode)?u(new Error("请输入正确的验证码")):u():u(new Error("请输入验证码"))}const H=p({account:[{required:!0,trigger:"blur",message:"请输入用户名"}],password:[{required:!0,trigger:"blur",message:"请输入密码"},{min:6,max:18,trigger:"blur",message:"密码长度为6到18位"}],verifyCode:[{required:!0,trigger:"blur",validator:j}]});function P(){U.value&&U.value.validate(k=>{k&&(w.value=!0,_.login(g.value).then(()=>{w.value=!1,g.value.remember?de("login_account",g.value.account):ue("login_account"),i.push(S.value),ge({title:pe(),message:`欢迎登录 ${d}`,type:"success",duration:3e3})}).catch(()=>{w.value=!1}))})}const B=p(),h=p({account:"",captcha:"",password:"",checkPassword:""}),O=p({account:[{required:!0,trigger:"blur",message:"请输入用户名"}],captcha:[{required:!0,trigger:"blur",message:"请输入验证码"}],password:[{required:!0,trigger:"blur",message:"请输入密码"},{min:6,max:18,trigger:"blur",message:"密码长度为6到18位"}],checkPassword:[{required:!0,trigger:"blur",message:"请再次输入密码"},{validator:(k,e,u)=>{e!==h.value.password?u(new Error("两次输入的密码不一致")):u()}}]});function Q(){K({message:"注册模块仅提供界面演示，无实际功能，需开发者自行扩展",type:"warning"}),B.value&&B.value.validate(k=>{})}const $=p(),b=p({account:localStorage.login_account,captcha:"",newPassword:""}),W=p({account:[{required:!0,trigger:"blur",message:"请输入用户名"}],captcha:[{required:!0,trigger:"blur",message:"请输入验证码"}],newPassword:[{required:!0,trigger:"blur",message:"请输入新密码"},{min:6,max:18,trigger:"blur",message:"密码长度为6到18位"}]});function G(){K({message:"重置密码仅提供界面演示，无实际功能，需开发者自行扩展",type:"info"}),$.value&&$.value.validate(k=>{})}return(k,e)=>{const u=se,c=C("ElInput"),v=C("ElFormItem"),J=ve,ee=C("ElCheckbox"),F=C("ElLink"),R=C("ElButton"),L=C("ElForm");return Z(),A("div",_e,[s("div",{class:"bg-banner",style:Y({backgroundImage:`url(${o(V)})`})},[s("img",{class:"login-banner",src:o(l),alt:""},null,8,ye)],4),s("div",xe,[I(t(L,{ref_key:"loginFormRef",ref:U,model:o(g),rules:o(H),class:"login-form"},{default:r(()=>[s("div",be,[s("img",{src:o(f),class:"logo",alt:""},null,8,Ve),s("h3",ke," 欢迎来到 "+le(o(d))+" ! 👋🏻 ",1)]),s("div",null,[t(v,{prop:"account"},{default:r(()=>[t(c,{modelValue:o(g).account,"onUpdate:modelValue":e[0]||(e[0]=a=>o(g).account=a),placeholder:"用户名",clearable:"",type:"text",tabindex:"1"},{prefix:r(()=>[t(u,{name:"ep:user"})]),_:1},8,["modelValue"])]),_:1}),t(v,{prop:"password"},{default:r(()=>[t(c,{modelValue:o(g).password,"onUpdate:modelValue":e[1]||(e[1]=a=>o(g).password=a),type:"password",clearable:"",placeholder:"密码",tabindex:"2",autocomplete:"new-password","show-password":"",onKeyup:z(P,["enter"])},{prefix:r(()=>[t(u,{name:"ep:lock"})]),_:1},8,["modelValue"])]),_:1}),t(v,{prop:"verifyCode"},{default:r(()=>[t(c,{modelValue:o(g).verifyCode,"onUpdate:modelValue":e[2]||(e[2]=a=>o(g).verifyCode=a),class:"verify-code",type:"text",clearable:"",maxlength:"4",placeholder:"验证码",tabindex:"3",onKeyup:z(P,["enter"])},{prefix:r(()=>[t(u,{name:"lucide:shield-check"})]),append:r(()=>[s("div",Ce,[t(J,{ref_key:"imgVerifyRef",ref:T},null,512)])]),_:1},8,["modelValue"])]),_:1})]),s("div",Re,[t(ee,{modelValue:o(g).remember,"onUpdate:modelValue":e[3]||(e[3]=a=>o(g).remember=a)},{default:r(()=>e[15]||(e[15]=[y(" 记住我 ")])),_:1},8,["modelValue"]),t(F,{type:"primary",underline:!1,onClick:e[4]||(e[4]=a=>m.value="reset")},{default:r(()=>e[16]||(e[16]=[y(" 忘记密码了? ")])),_:1})]),t(R,{loading:o(w),type:"primary",round:"",size:"large",style:{width:"100%"},onClick:N(P,["prevent"])},{default:r(()=>e[17]||(e[17]=[y(" 登录 ")])),_:1},8,["loading"]),ae("",!0)]),_:1},8,["model","rules"]),[[q,o(m)==="login"]]),I(t(L,{ref_key:"registerFormRef",ref:B,model:o(h),rules:o(O),class:"login-form","auto-complete":"on"},{default:r(()=>[e[24]||(e[24]=s("div",{class:"title-container"},[s("h3",{class:"title"}," 探索从这里开始! 🚀 ")],-1)),s("div",null,[t(v,{prop:"account"},{default:r(()=>[t(c,{modelValue:o(h).account,"onUpdate:modelValue":e[6]||(e[6]=a=>o(h).account=a),clearable:"",placeholder:"用户名",tabindex:"1"},{prefix:r(()=>[t(u,{name:"ep:user"})]),_:1},8,["modelValue"])]),_:1}),t(v,{prop:"captcha"},{default:r(()=>[t(c,{modelValue:o(h).captcha,"onUpdate:modelValue":e[7]||(e[7]=a=>o(h).captcha=a),clearable:"",placeholder:"验证码",tabindex:"2"},{prefix:r(()=>[t(u,{name:"lucide:shield-check"})]),append:r(()=>[t(R,null,{default:r(()=>e[20]||(e[20]=[y("发送验证码")])),_:1})]),_:1},8,["modelValue"])]),_:1}),t(v,{prop:"password"},{default:r(()=>[t(c,{modelValue:o(h).password,"onUpdate:modelValue":e[8]||(e[8]=a=>o(h).password=a),clearable:"",type:"password",placeholder:"密码",tabindex:"3","show-password":""},{prefix:r(()=>[t(u,{name:"ep:lock"})]),_:1},8,["modelValue"])]),_:1}),t(v,{prop:"checkPassword"},{default:r(()=>[t(c,{modelValue:o(h).checkPassword,"onUpdate:modelValue":e[9]||(e[9]=a=>o(h).checkPassword=a),clearable:"",type:"password",placeholder:"确认密码",tabindex:"4","show-password":""},{prefix:r(()=>[t(u,{name:"ep:lock"})]),_:1},8,["modelValue"])]),_:1})]),t(R,{loading:o(w),type:"primary",round:"",size:"large",style:{width:"100%","margin-top":"20px"},onClick:N(Q,["prevent"])},{default:r(()=>e[21]||(e[21]=[y(" 注册 ")])),_:1},8,["loading"]),s("div",Ee,[e[23]||(e[23]=s("span",{class:"text"},"已经有帐号?",-1)),t(F,{type:"primary",underline:!1,onClick:e[10]||(e[10]=a=>m.value="login")},{default:r(()=>e[22]||(e[22]=[y(" 去登录 ")])),_:1})])]),_:1},8,["model","rules"]),[[q,o(m)==="register"]]),I(t(L,{ref_key:"resetFormRef",ref:$,model:o(b),rules:o(W),class:"login-form"},{default:r(()=>[e[28]||(e[28]=s("div",{class:"title-container"},[s("h3",{class:"title"}," 忘记密码了? 🔒 ")],-1)),s("div",null,[t(v,{prop:"account"},{default:r(()=>[t(c,{modelValue:o(b).account,"onUpdate:modelValue":e[11]||(e[11]=a=>o(b).account=a),clearable:"",placeholder:"用户名",type:"text",tabindex:"1"},{prefix:r(()=>[t(u,{name:"ep:user"})]),_:1},8,["modelValue"])]),_:1}),t(v,{prop:"captcha"},{default:r(()=>[t(c,{modelValue:o(b).captcha,"onUpdate:modelValue":e[12]||(e[12]=a=>o(b).captcha=a),clearable:"",placeholder:"验证码",type:"text",tabindex:"2"},{prefix:r(()=>[t(u,{name:"lucide:shield-check"})]),append:r(()=>[t(R,null,{default:r(()=>e[25]||(e[25]=[y("发送验证码")])),_:1})]),_:1},8,["modelValue"])]),_:1}),t(v,{prop:"newPassword"},{default:r(()=>[t(c,{modelValue:o(b).newPassword,"onUpdate:modelValue":e[13]||(e[13]=a=>o(b).newPassword=a),clearable:"",type:"password",placeholder:"新密码",tabindex:"3","show-password":""},{prefix:r(()=>[t(u,{name:"ep:lock"})]),_:1},8,["modelValue"])]),_:1})]),t(R,{loading:o(w),type:"primary",round:"",size:"large",style:{width:"100%","margin-top":"20px"},onClick:N(G,["prevent"])},{default:r(()=>e[26]||(e[26]=[y(" 确认 ")])),_:1},8,["loading"]),s("div",Se,[t(F,{type:"primary",underline:!1,onClick:e[14]||(e[14]=a=>m.value="login")},{default:r(()=>e[27]||(e[27]=[y(" 去登录 ")])),_:1})])]),_:1},8,["model","rules"]),[[q,o(m)==="reset"]])])])}}}),nt=fe(Ue,[["__scopeId","data-v-819df6e8"]]);export{nt as default};
