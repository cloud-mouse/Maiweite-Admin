import{_ as L,a as O}from"./index.vue_vue_type_script_setup_true_lang-B6rtLIgD.js";import{_ as H}from"./index.vue_vue_type_script_setup_true_lang-6EwJ9N-Y.js";import{_ as K,g as S}from"./user-C6GnB8Ca.js";import{d as w,bp as T,bN as Z,r as V,ak as x,o as C,V as F,W as _,a as m,c as A,a0 as d,Z as k,R as W,n as $,l as q,k as c}from"./@vue-pvvZVrFb.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./@iconify-CaxNw4tt.js";import"./@element-plus-B1SGd3PH.js";import"./sortablejs-CSbe8mM5.js";import"./@imengyu-CJXSuKKD.js";import"./vue-CFNvRKsS.js";import"./index-mHXP9XuL.js";import"./floating-vue-4fuRf8vs.js";import"./@floating-ui-DiM7Jq06.js";import"./overlayscrollbars-DIcyBJd7.js";import"./vue-m-message-DjrEUVXL.js";import"./element-plus-C-DFkfq5.js";import"./lodash-es-l8Yk8yFo.js";import"./@vueuse-T0N5pcum.js";import"./nprogress-D_ytO6nf.js";import"./@sxzz-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-BU0tXZvT.js";import"./async-validator-CRbnkQr6.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./crypto-js-B0zqdDQ0.js";import"./pinia-DSCqkA4F.js";import"./vue-demi-Dq6ymT-8.js";import"./colord-CrBFWQzZ.js";import"./monaco-editor-Dhhxw_oD.js";import"./vue-router-EGzKxKvl.js";import"./path-browserify-OMgzBbgZ.js";import"./axios-CRnBnh7r.js";import"./vite-plugin-mock-Bh-DZNsC.js";import"./mockjs-CK6d0B8Y.js";const J={class:"select-empty"},Q={key:0,class:"select-close"},X={class:"table-box"},Y=w({name:"TableSelect",__name:"index",props:T({requestApi:{},placeholder:{default:"请选择"},size:{default:"default"},clearable:{type:Boolean,default:!0},multiple:{type:Boolean,default:!1},collapseTags:{type:Boolean,default:!1},collapseTagsTooltip:{type:Boolean,default:!1},fitInputWidth:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},teleported:{type:Boolean,default:!0},selectWidth:{},tableWidth:{default:"100%"},columns:{default:[]},initTableParam:{default:{}},tableProps:{default:()=>({label:"id",value:"name"})},needClose:{type:Boolean,default:!1}},{modelValue:{default:null},modelModifiers:{}}),emits:T(["change","reset"],["update:modelValue"]),setup(g,{emit:y}){const o=g,u=y,l=Z(g,"modelValue"),a=V();function P(){a.value.clearSelection(),a.value.reset()}const v=V();function b(){v.value.blur()}function h(e){e&&P()}function E(){o.multiple?l.value=[]:l.value={},u("change",l.value)}function R(e){var s,i,n,r;const t=z(e.value);((i=(s=a.value)==null?void 0:s.selectedList)==null?void 0:i.some(f=>f[o.tableProps.value]===e.value))&&t&&((n=a==null?void 0:a.value)==null||n.toggleRowSelection(t,!1)),(r=l.value)==null||r.forEach((f,B)=>{f.value===e.value&&l.value.splice(B,1)}),u("change",l.value)}function z(e){return a.value.tableData.find(t=>t[o.tableProps.value]===e)}function D(e){return M(),{list:e&&e.records||[],total:e&&e.total||0}}function M(){o.multiple?$(()=>{var e,t;(t=(e=a.value)==null?void 0:e.tableData)==null||t.forEach(p=>{var s;(s=l.value)==null||s.forEach(i=>{var n,r,f;i.value===p[o.tableProps.value]&&((r=(n=a.value)==null?void 0:n.selectedList)!=null&&r.some(I=>I[o.tableProps.value]===i.value)||(f=a==null?void 0:a.value)==null||f.toggleRowSelection(p,!0))})})}):$(()=>{var e;a.value.radio=((e=l.value)==null?void 0:e.value)||""})}function N(e,t){var p;o.multiple?((p=l.value)==null?void 0:p.some(i=>i.value===t[o.tableProps.value]))?(l.value.forEach((i,n)=>{var r;i.value===t[o.tableProps.value]&&((r=l.value)==null||r.splice(n,1))}),u("change",l.value)):(delete t.label,l.value.push({value:t[o.tableProps.value],label:t[o.tableProps.label],...t}),u("change",l.value)):(delete t.label,l.value={value:t[o.tableProps.value],label:t[o.tableProps.label],...t},u("change",l.value),b())}function U(e){var t,p;o.multiple&&(e.length>0?(e.forEach(s=>{var n;((n=l.value)==null?void 0:n.some(r=>r.value===s[o.tableProps.value]))||(delete s.label,l.value.push({value:s[o.tableProps.value],label:s[o.tableProps.label],...s}))}),u("change",l.value)):((p=(t=a.value)==null?void 0:t.tableData)==null||p.forEach(s=>{l.value.forEach((i,n)=>{i.value===s[o.tableProps.value]&&l.value.splice(n,1)})}),u("change",l.value)))}function j(){u("reset")}return(e,t)=>{const p=H,s=x("el-icon"),i=x("el-select");return l.value?(C(),F(i,{key:0,ref_key:"selectTableRef",ref:v,modelValue:l.value,"onUpdate:modelValue":t[0]||(t[0]=n=>l.value=n),"popper-class":"tip-dropdown",teleported:e.teleported,"fit-input-width":e.fitInputWidth,style:W({width:e.selectWidth?`${e.selectWidth}`:"100%"}),class:"select-box",size:e.size,clearable:e.clearable,multiple:e.multiple,"collapse-tags":e.collapseTags,"collapse-tags-tooltip":e.collapseTagsTooltip,placeholder:e.placeholder,disabled:e.disabled,onRemoveTag:R,onVisibleChange:h,onClear:E},{empty:_(()=>[m("div",J,[e.needClose?(C(),A("div",Q,[d(s,{class:"select-close__icon",onClick:b},{default:_(()=>[d(p,{name:"ep:close"})]),_:1})])):k("",!0),m("div",{class:"select-table",style:W({width:e.tableWidth?`${e.tableWidth}`:"100%"})},[m("div",X,[d(K,{ref_key:"proTableRef",ref:a,"search-col":{xs:1,sm:2,md:2,lg:2,xl:2},"init-param":e.initTableParam,"tool-button":!1,"data-callback":D,"highlight-current-row":"","page-layout":"total, prev, pager, next","request-api":e.requestApi,columns:e.columns,onReset:j,onSelect:N,onSelectAll:U},null,8,["init-param","request-api","columns"])])],4)])]),_:1},8,["modelValue","teleported","fit-input-width","style","size","clearable","multiple","collapse-tags","collapse-tags-tooltip","placeholder","disabled"])):k("",!0)}}}),ee=G(Y,[["__scopeId","data-v-85f1cbff"]]),le={class:"w-240px flex py-20px"},ae={class:"w-240px flex py-20px"},Me=w({name:"TableSelectDemo",__name:"index",setup(g){const y=q([{type:"selection",fixed:"left",width:80},{prop:"name",label:"用户名称",minWidth:100,search:{el:"input"}}]),o=q([{type:"radio",fixed:"left",width:80},{prop:"name",label:"用户名称",minWidth:100,search:{el:"input"}}]),u=V({selectObj:{value:1,label:"张三"},selectArr:[{value:1,label:"张三"}]});return(l,a)=>{const P=L,v=ee,b=O;return C(),A("div",null,[d(P,{title:"表格选择器",content:"表格选择器示例"}),d(b,{class:"mb-10px"},{default:_(()=>[a[2]||(a[2]=m("div",null,"表格选择器多选",-1)),m("div",le,[d(v,{modelValue:c(u).selectArr,"onUpdate:modelValue":a[0]||(a[0]=h=>c(u).selectArr=h),multiple:"",columns:c(y),"request-api":c(S),"fit-input-width":!1,"table-props":{label:"name",value:"id"}},null,8,["modelValue","columns","request-api"])])]),_:1}),d(b,null,{default:_(()=>[a[3]||(a[3]=m("div",null,"表格选择器单选",-1)),m("div",ae,[d(v,{modelValue:c(u).selectObj,"onUpdate:modelValue":a[1]||(a[1]=h=>c(u).selectObj=h),columns:c(o),"request-api":c(S),"fit-input-width":!1,"table-props":{label:"name",value:"id"}},null,8,["modelValue","columns","request-api"])])]),_:1})])}}});export{Me as default};
