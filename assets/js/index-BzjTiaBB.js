import{g as y,a as T,e as C,d as N,_ as P}from"./user-C6GnB8Ca.js";import{Q as E,R as S,P as $}from"./@element-plus-B1SGd3PH.js";import{_ as L}from"./userDrawer.vue_vue_type_script_setup_true_lang-BrhmPVOG.js";import{b as W,a as A}from"./element-plus-C-DFkfq5.js";import{d as B,r as w,l as h,a0 as r,ak as v,o as M,c as O,a as f,W as n,k as l,_ as b}from"./@vue-pvvZVrFb.js";import"./sortablejs-CSbe8mM5.js";import"./@imengyu-CJXSuKKD.js";import"./vue-CFNvRKsS.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-mHXP9XuL.js";import"./floating-vue-4fuRf8vs.js";import"./@floating-ui-DiM7Jq06.js";import"./overlayscrollbars-DIcyBJd7.js";import"./vue-m-message-DjrEUVXL.js";import"./crypto-js-B0zqdDQ0.js";import"./lodash-es-l8Yk8yFo.js";import"./pinia-DSCqkA4F.js";import"./vue-demi-Dq6ymT-8.js";import"./colord-CrBFWQzZ.js";import"./monaco-editor-Dhhxw_oD.js";import"./vue-router-EGzKxKvl.js";import"./@vueuse-T0N5pcum.js";import"./nprogress-D_ytO6nf.js";import"./path-browserify-OMgzBbgZ.js";import"./axios-CRnBnh7r.js";import"./@iconify-CaxNw4tt.js";import"./vite-plugin-mock-Bh-DZNsC.js";import"./mockjs-CK6d0B8Y.js";import"./@sxzz-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-BU0tXZvT.js";import"./async-validator-CRbnkQr6.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./index.vue_vue_type_script_setup_true_lang-6EwJ9N-Y.js";function U(_,o={},s,m="warning"){return new Promise((d,c)=>{W.confirm(`是否${s}?`,"温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:m,draggable:!0}).then(async()=>{if(!await _(o))return c(new Error("Something went wrong"));A({type:"success",message:`${s}成功!`}),d(!0)})})}const D={class:"table-container"},R={class:"table-box"},H={class:"flex"},V={class:"flex flex-wrap justify-center"},ye=B({name:"SysUserList",__name:"index",setup(_){const o=w(),s=h({});function m(e){return{list:e&&e.records||[],total:e&&e.total||0}}function d(e){let t={...e};return y(t)}const c=h([{type:"index",label:"排序",width:80},{prop:"name",label:"姓名",minWidth:100,search:{el:"input"}},{prop:"gender",label:"性别",enum:[{label:"男",value:"MAN"},{label:"女",value:"WOMAN"}],search:{el:"select"}},{prop:"phone",label:"登录账号",minWidth:100},{prop:"roleNames",label:"角色",minWidth:100},{prop:"openStatus",label:"用户状态",enum:[{label:"启用",value:"OPEN"},{label:"停用",value:"CLOSE"}],fieldNames:{label:"label",value:"value"},minWidth:100,search:{el:"tree-select",props:{filterable:!0}},render:e=>r(v("el-tag"),{type:e.row.openStatus==="OPEN"?"success":"danger"},{default:()=>[e.row.openStatus==="OPEN"?"启用":"停用"]})},{prop:"createTime",label:"创建时间",minWidth:100,search:{el:"date-picker",span:1,props:{type:"datetimerange",valueFormat:"YYYY-MM-DD HH:mm:ss"}}},{prop:"operation",label:"操作",fixed:"right",width:200}]),u=w();function g(e,t){var p,a;const i={title:e==="add"?"新增":e==="edit"?"编辑":"查看",isView:e==="show",row:{...t},api:e==="add"?T:e==="edit"?C:void 0,getTableList:(p=o.value)==null?void 0:p.getTableList};(a=u.value)==null||a.acceptParams(i)}async function k(e){var t;await U(N,{id:e.id},`删除【${e.name}】`),(t=o.value)==null||t.getTableList()}return(e,t)=>{const i=v("el-button"),p=P;return M(),O("div",D,[f("div",R,[r(p,{ref_key:"proTableRef",ref:o,height:"100%","highlight-current-row":"",border:!1,title:"用户列表","request-api":d,columns:l(c),"data-callback":m,"init-param":l(s)},{tableHeader:n(()=>[f("div",H,[r(i,{type:"primary",icon:l(E),onClick:t[0]||(t[0]=a=>g("add"))},{default:n(()=>t[1]||(t[1]=[b(" 新增用户 ")])),_:1},8,["icon"])])]),operation:n(a=>[f("div",V,[r(i,{type:"primary",link:"",icon:l(S),onClick:x=>g("edit",a.row)},{default:n(()=>t[2]||(t[2]=[b(" 编辑 ")])),_:2},1032,["icon","onClick"]),r(i,{type:"danger",link:"",icon:l($),onClick:x=>k(a.row)},{default:n(()=>t[3]||(t[3]=[b(" 删除 ")])),_:2},1032,["icon","onClick"])])]),_:1},8,["columns","init-param"]),r(L,{ref_key:"drawerRef",ref:u},null,512)])])}}});export{ye as default};
