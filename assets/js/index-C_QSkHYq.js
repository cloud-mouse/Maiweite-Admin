import{_ as A}from"./index.vue_vue_type_script_setup_true_lang-6EwJ9N-Y.js";import{a as b}from"./element-plus-C-DFkfq5.js";import{d as P,ak as d,o as c,V as U,W as M,c as $,a,a0 as i,Z as V,_ as X,bp as B,bN as D,r as F,F as Z,ac as G,R as g,X as C,a1 as S,q as R,k as f,a8 as T}from"./@vue-pvvZVrFb.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";const H={class:"slot"},J={key:0,class:"el-upload__tip"},K={style:{display:"inline-block"}},Q=P({name:"FileUpload",__name:"index",props:{action:{},headers:{},data:{},name:{default:"file"},size:{default:2},max:{default:3},files:{default:()=>[]},notip:{type:Boolean,default:!1},ext:{default:()=>["zip","rar"]}},emits:["onSuccess"],setup(y,{emit:E}){const r=y,z=E,l=o=>{const u=o.name.split(".").at(-1)??"",v=r.ext.includes(u),w=o.size/1024/1024<r.size;return v||b.error(`上传文件只支持 ${r.ext.join(" / ")} 格式！`),w||b.error(`上传文件大小不能超过 ${r.size}MB！`),v&&w},t=()=>{b.warning("文件上传超过限制")},I=(o,h,u)=>{z("onSuccess",o,h,u)};return(o,h)=>{const u=A,v=d("ElAlert"),w=d("ElUpload");return c(),U(w,{headers:o.headers,action:o.action,data:o.data,name:o.name,"before-upload":l,"on-exceed":t,"on-success":I,"file-list":o.files,limit:o.max,drag:""},{tip:M(()=>[o.notip?V("",!0):(c(),$("div",J,[a("div",K,[i(v,{title:`上传文件支持 ${o.ext.join(" / ")} 格式，单个文件大小不超过 ${o.size}MB，且文件数量不超过 ${o.max} 个`,type:"info","show-icon":"",closable:!1},null,8,["title"])])]))]),default:M(()=>[a("div",H,[i(u,{name:"ep:upload-filled",class:"el-icon--upload"}),h[0]||(h[0]=a("div",{class:"el-upload__text"},[X(" 将文件拖到此处，或"),a("em",null,"点击上传")],-1))])]),_:1},8,["headers","action","data","name","file-list","limit"])}}}),_e=L(Q,[["__scopeId","data-v-f79e317d"]]),Y={class:"upload-container"},x={class:"mask"},ee={class:"actions"},se=["onClick"],te=["onClick"],le=["onClick"],ae=["onClick"],oe={key:0,class:"el-upload__tip"},ie={style:{display:"inline-block"}},ne=P({name:"ImagesUpload",__name:"index",props:B({action:{},headers:{},data:{},name:{default:"file"},size:{default:2},max:{default:3},width:{default:150},height:{default:150},placeholder:{default:""},notip:{type:Boolean,default:!1},ext:{default:()=>["jpg","png","gif","bmp"]}},{modelValue:{default:[]},modelModifiers:{}}),emits:B(["onSuccess"],["update:modelValue"]),setup(y,{emit:E}){const r=y,z=E,l=D(y,"modelValue"),t=F({dialogImageIndex:0,imageViewerVisible:!1,progress:{preview:"",percent:0}});function I(e){t.value.dialogImageIndex=e,t.value.imageViewerVisible=!0}function o(){t.value.imageViewerVisible=!1}function h(e){l.value.splice(e,1)}function u(e,m){m==="left"&&e!==0&&(l.value[e]=l.value.splice(e-1,1,l.value[e])[0]),m==="right"&&e!==l.value.length-1&&(l.value[e]=l.value.splice(e+1,1,l.value[e])[0])}const v=e=>{const p=e.name.split(".").at(-1)??"",n=r.ext.includes(p),k=e.size/1024/1024<r.size;return n||b.error(`上传图片只支持 ${r.ext.join(" / ")} 格式！`),k||b.error(`上传图片大小不能超过 ${r.size}MB！`),n&&k&&(t.value.progress.preview=URL.createObjectURL(e)),n&&k},w=e=>{t.value.progress.percent=~~e.percent},s=e=>{t.value.progress.preview="",t.value.progress.percent=0,z("onSuccess",e)};return(e,m)=>{const p=d("ElImage"),n=A,k=d("ElProgress"),N=d("ElUpload"),j=d("ElAlert"),q=d("ElImageViewer");return c(),$("div",Y,[(c(!0),$(Z,null,G(l.value,(W,_)=>(c(),$("div",{key:_,class:"images"},[_<e.max?(c(),U(p,{key:0,src:W,style:g(`width:${e.width}px;height:${e.height}px;`),fit:"cover"},null,8,["src","style"])):V("",!0),a("div",x,[a("div",ee,[a("span",{title:"预览",onClick:O=>I(_)},[i(n,{name:"ep:zoom-in",class:"icon"})],8,se),a("span",{title:"移除",onClick:O=>h(_)},[i(n,{name:"ep:delete",class:"icon"})],8,te),C(a("span",{title:"左移",class:R({disabled:_===0}),onClick:O=>u(_,"left")},[i(n,{name:"ep:back",class:"icon"})],10,le),[[S,l.value.length>1]]),C(a("span",{title:"右移",class:R({disabled:_===l.value.length-1}),onClick:O=>u(_,"right")},[i(n,{name:"ep:right",class:"icon"})],10,ae),[[S,l.value.length>1]])])])]))),128)),C(i(N,{"show-file-list":!1,headers:e.headers,action:e.action,data:e.data,name:e.name,"before-upload":v,"on-progress":w,"on-success":s,drag:"",class:"images-upload"},{default:M(()=>[a("div",{class:"image-slot",style:g(`width:${e.width}px;height:${e.height}px;`)},[i(n,{name:"ep:plus",class:"icon"})],4),C(a("div",{class:"progress",style:g(`width:${e.width}px;height:${e.height}px;`)},[i(p,{src:f(t).progress.preview,style:g(`width:${e.width}px;height:${e.height}px;`),fit:"fill"},null,8,["src","style"]),i(k,{type:"circle",width:Math.min(e.width,e.height)*.8,percentage:f(t).progress.percent},null,8,["width","percentage"])],4),[[S,f(t).progress.percent]])]),_:1},8,["headers","action","data","name"]),[[S,l.value.length<e.max]]),e.notip?V("",!0):(c(),$("div",oe,[a("div",ie,[i(j,{title:`上传图片支持 ${e.ext.join(" / ")} 格式，单张图片大小不超过 ${e.size}MB，建议图片尺寸为 ${e.width}*${e.height}，且图片数量不超过 ${e.max} 张`,type:"info","show-icon":"",closable:!1},null,8,["title"])])])),f(t).imageViewerVisible?(c(),U(q,{key:1,"url-list":l.value,"initial-index":f(t).dialogImageIndex,teleported:"",onClose:o},null,8,["url-list","initial-index"])):V("",!0)])}}}),$e=L(ne,[["__scopeId","data-v-f2b41c66"]]),re={class:"upload-container"},ce={key:1,class:"image"},pe={class:"mask"},de={class:"actions"},ue={key:0,class:"el-upload__tip"},me={style:{display:"inline-block"}},he=P({name:"ImageUpload",__name:"index",props:B({action:{},headers:{},data:{},name:{default:"file"},size:{default:2},width:{default:150},height:{default:150},placeholder:{default:""},notip:{type:Boolean,default:!1},ext:{default:()=>["jpg","png","gif","bmp"]}},{modelValue:{default:""},modelModifiers:{}}),emits:B(["onSuccess"],["update:modelValue"]),setup(y,{emit:E}){const r=y,z=E,l=D(y,"modelValue"),t=F({imageViewerVisible:!1,progress:{preview:"",percent:0}});function I(){t.value.imageViewerVisible=!0}function o(){t.value.imageViewerVisible=!1}function h(){l.value=""}const u=s=>{const m=s.name.split(".").at(-1)??"",p=r.ext.includes(m),n=s.size/1024/1024<r.size;return p||b.error(`上传图片只支持 ${r.ext.join(" / ")} 格式！`),n||b.error(`上传图片大小不能超过 ${r.size}MB！`),p&&n&&(t.value.progress.preview=URL.createObjectURL(s)),p&&n},v=s=>{t.value.progress.percent=~~s.percent},w=s=>{t.value.progress.preview="",t.value.progress.percent=0,z("onSuccess",s)};return(s,e)=>{const m=A,p=d("ElImage"),n=d("ElProgress"),k=d("ElUpload"),N=d("ElAlert"),j=d("ElImageViewer");return c(),$("div",re,[i(k,{"show-file-list":!1,headers:s.headers,action:s.action,data:s.data,name:s.name,"before-upload":u,"on-progress":v,"on-success":w,drag:"",class:"image-upload"},{default:M(()=>[l.value===""?(c(),U(p,{key:0,src:l.value===""?s.placeholder:l.value,style:g(`width:${s.width}px;height:${s.height}px;`),fit:"fill"},{error:M(()=>[a("div",{class:"image-slot",style:g(`width:${s.width}px;height:${s.height}px;`)},[i(m,{name:"ep:plus",class:"icon"})],4)]),_:1},8,["src","style"])):(c(),$("div",ce,[i(p,{src:l.value,style:g(`width:${s.width}px;height:${s.height}px;`),fit:"fill"},null,8,["src","style"]),a("div",pe,[a("div",de,[a("span",{title:"预览",onClick:T(I,["stop"])},[i(m,{name:"ep:zoom-in",class:"icon"})]),a("span",{title:"移除",onClick:T(h,["stop"])},[i(m,{name:"ep:delete",class:"icon"})])])])])),C(a("div",{class:"progress",style:g(`width:${s.width}px;height:${s.height}px;`)},[i(p,{src:f(t).progress.preview,style:g(`width:${s.width}px;height:${s.height}px;`),fit:"fill"},null,8,["src","style"]),i(n,{type:"circle",width:Math.min(s.width,s.height)*.8,percentage:f(t).progress.percent},null,8,["width","percentage"])],4),[[S,l.value===""&&f(t).progress.percent]])]),_:1},8,["headers","action","data","name"]),s.notip?V("",!0):(c(),$("div",ue,[a("div",me,[i(N,{title:`上传图片支持 ${s.ext.join(" / ")} 格式，且图片大小不超过 ${s.size}MB，建议图片尺寸为 ${s.width}*${s.height}`,type:"info","show-icon":"",closable:!1},null,8,["title"])])])),f(t).imageViewerVisible?(c(),U(j,{key:1,"url-list":[l.value],teleported:"",onClose:o},null,8,["url-list"])):V("",!0)])}}}),ye=L(he,[["__scopeId","data-v-7a9b9ca1"]]);export{ye as _,$e as a,_e as b};
